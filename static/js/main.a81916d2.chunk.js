(this["webpackJsonpbtm-promotion-inspector"]=this["webpackJsonpbtm-promotion-inspector"]||[]).push([[0],{14:function(t,e,a){},20:function(t,e,a){t.exports=a.p+"static/media/logo.5d5d9eef.svg"},21:function(t,e,a){},24:function(t,e,a){"use strict";a.r(e);var s=a(0),r=a.n(s),o=a(7),n=a.n(o),i=(a(14),a(8));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},8:function(t,e,a){"use strict";(function(t){var s=a(2),r=a(3),o=a(5),n=a(4),i=a(0),p=a.n(i),l=(a(20),a(21),a(1)),c=a.n(l),m=(a(23),"https://www.botemania.es");c()().locale("es");var u=function(e){Object(o.a)(i,e);var a=Object(n.a)(i);function i(t){var e;return Object(s.a)(this,i),(e=a.call(this,t)).state={config:{settings:{env:{}}},jira:{fields:{},key:null}},e}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var t=this,e=m+this.props.promo.url.replace("index.html","");fetch(e+"config.json").then((function(t){return t.json()})).then((function(e){t.setState({config:e})}))}},{key:"componentDidUpdate",value:function(e,a){var s=this;if(e.username!=this.props.username||e.password!=this.props.password){var r=new Headers;r.set("Authorization","Basic "+t.from(this.props.username+":"+this.props.password).toString("base64")),fetch('https://jira.gamesys.co.uk/rest/api/latest/search?jql="Path (URL) of the promotion" ~ '+this.props.promo.path,{method:"GET",headers:r}).then((function(t){return t.json()})).then((function(t){t&&t.issues&&t.issues[0]&&s.setState({jira:t.issues.find((function(t){return t.fields.customfield_12471&&t.fields.customfield_12471.trim()==s.props.promo.path.trim()}))})}))}}},{key:"render",value:function(){return p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("a",{href:"https://jira.gamesys.co.uk/browse/"+this.state.jira.key},this.state.jira.key)),p.a.createElement("td",null,this.state.jira.fields&&this.state.jira.key?c()(this.state.jira.fields.customfield_12274,"YYYY-MM-DD").isSame(c()(this.props.promo.startDate,"DD/MM/YYYY"))?"":"\u274cFI("+this.state.jira.fields.customfield_12274+")  ":"",this.state.jira.fields&&this.state.jira.key?c()(this.state.jira.fields.customfield_12470,"YYYY-MM-DD").isSame(c()(this.props.promo.expiryDate,"DD/MM/YYYY").subtract(1,"days"))?"":"\u274cFF ("+this.state.jira.fields.customfield_12470+")  ":"",this.state.jira.fields&&this.state.jira.key&&this.state.config.settings.env.prod?this.state.config.settings.env.prod.promoID==this.state.jira.fields.customfield_12382?"":"\u274cID("+this.state.jira.fields.customfield_12382+") ":""),p.a.createElement("td",null,this.props.next?c()(this.props.next.startDate,"DD/MM/YYYY")<c()()&&c()(this.props.next.expiryDate,"DD/MM/YYYY")>c()()?"\ud83d\udd25\ufe0f":c()(this.props.next.startDate,"DD/MM/YYYY")<c()()&&c()(this.props.next.expiryDate,"DD/MM/YYYY")<c()()?"\ud83e\udddf":c()(this.props.next.startDate,"DD/MM/YYYY")>c()()&&c()(this.props.next.expiryDate,"DD/MM/YYYY")>c()()?"\ud83d\udd2e":"\ud83d\uded1":"",this.props.next?c()(this.props.next.startDate,"DD/MM/YYYY").isSame(c()(this.props.promo.startDate,"DD/MM/YYYY").subtract(5,"days"),"date")&&this.props.next.expiryDate==this.props.promo.startDate?"\u2714":"\u2716\ufe0f":""),p.a.createElement("td",null,p.a.createElement("a",{target:"_blank",href:m+"/promotion/"+this.props.promo.path+"?previewDate="+c()(this.props.promo.startDate,"DD/MM/YYYY").format("DD-MM-YYYY")},this.props.promo.title)),p.a.createElement("td",null,this.state.config.settings.env.prod?this.state.config.settings.env.prod.promoID:""),p.a.createElement("td",null,c()(this.props.promo.startDate,"DD/MM/YYYY")<c()()&&c()(this.props.promo.expiryDate,"DD/MM/YYYY")>c()()?"\ud83d\udd25\ufe0f":c()(this.props.promo.startDate,"DD/MM/YYYY")<c()()&&c()(this.props.promo.expiryDate,"DD/MM/YYYY")<c()()?"\ud83e\udddf":c()(this.props.promo.startDate,"DD/MM/YYYY")>c()()&&c()(this.props.promo.expiryDate,"DD/MM/YYYY")>c()()?"\ud83d\udd2e":"\ud83d\uded1"),p.a.createElement("td",{style:{color:this.props.promo.startDate==this.state.config.settings.startDate?"green":"red"}},c()(this.props.promo.startDate,"DD/MM/YYYY").format("DD MMM YY")),p.a.createElement("td",{style:{color:this.props.promo.expiryDate==this.state.config.settings.expiryDate?"green":"red"}},c()(this.props.promo.expiryDate,"DD/MM/YYYY").format("DD MMM YY")),p.a.createElement("td",null,this.props.promo.bucket),p.a.createElement("td",null,this.props.promo.partners?this.props.promo.partners.join(","):""),p.a.createElement("td",null,this.props.promo.devices)),p.a.createElement("tr",{style:{display:"none"}},p.a.createElement("td",{colSpan:"10"},"hoola")))}}]),i}(p.a.Component),h=function(e){Object(o.a)(i,e);var a=Object(n.a)(i);function i(e){var r;return Object(s.a)(this,i),(r=a.call(this,e)).buscarJiras=function(){var e=new Headers;e.set("Authorization","Basic "+t.from(document.getElementById("username").value+":"+document.getElementById("password").value).toString("base64")),fetch("https://jira.gamesys.co.uk/rest/api/latest/mypermissions",{method:"GET",headers:e}).then((function(t){t.ok&&r.setState({username:document.getElementById("username").value,password:document.getElementById("password").value})}))},r.state={promos:{}},r}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var t=this;fetch(m+"/api/config/promotions/v2/promotions-page.json").then((function(t){return t.json()})).then((function(e){return t.setState({promos:e})}))}},{key:"render",value:function(){var t=this;return p.a.createElement("div",{className:"App"},p.a.createElement("div",{className:"App-header"},p.a.createElement("h2",null,"BTM Promotions"),p.a.createElement("div",null,p.a.createElement("input",{placeholder:"Jira username",type:"text",id:"username"}),p.a.createElement("input",{placeholder:"Jira password",type:"password",id:"password"}),p.a.createElement("button",{onClick:this.buscarJiras},"Buscar Jiras")),p.a.createElement("br",null),p.a.createElement("table",null,p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",null,"Jira"),p.a.createElement("th",null,"Jira Errors"),p.a.createElement("th",null,"Pr\xf3ximamente"),p.a.createElement("th",null,"Title"),p.a.createElement("th",null,"ID"),p.a.createElement("th",null),p.a.createElement("th",null,"Start"),p.a.createElement("th",null,"End"),p.a.createElement("th",null,"Bucket"),p.a.createElement("th",null,"Partner"),p.a.createElement("th",null,"Devices"))),this.state.promos.categories?this.state.promos.categories[0].promotions.map((function(e,a){return p.a.createElement(u,{key:a,username:t.state.username,password:t.state.password,promo:e,next:t.state.promos.categories[1].promotions.find((function(t){return t.path==e.path}))})})):null)))}}]),i}(p.a.Component);e.a=h}).call(this,a(15).Buffer)},9:function(t,e,a){t.exports=a(24)}},[[9,1,2]]]);
//# sourceMappingURL=main.a81916d2.chunk.js.map